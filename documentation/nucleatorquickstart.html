<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.9" />
<title>nucleatorquickstart(7)</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="manpage">
<div id="header">
<h1>
nucleatorquickstart(7) Manual Page
</h1>
<h2>NAME</h2>
<div class="sectionbody">
<p>nucleatorquickstart -
   A quick start introduction to installing Nucleator
</p>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph"><p>This quick start introduction provides a walk-through of minimal
steps to take to create your first Nucleator Cage and Stackset
in a new AWS Account.</p></div>
<div class="paragraph"><p>See <a href="20545561.html">Nucleator User&#8217;s Guide</a> for a more
in-depth introductions and <a href="nucleator.html">Nucleator CLI Reference</a> for command usage.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_step_0_prerequisites">STEP 0 - PREREQUISITES</h2>
<div class="sectionbody">
<div class="paragraph"><p>You will need to install on your local machine:</p></div>
<div class="ulist"><ul>
<li>
<p>
Python 2.7x
</p>
</li>
<li>
<p>
Python setup tools (pip)
</p>
</li>
<li>
<p>
Python developer tools (required for Ansible pre-requisites)
</p>
</li>
<li>
<p>
Git
</p>
</li>
</ul></div>
<div class="paragraph"><p>To install:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>sudo apt-get install python2.7 python-pip python-dev git</tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_step_1_install_nucleator">STEP 1 - INSTALL NUCLEATOR</h2>
<div class="sectionbody">
<div class="paragraph"><p>Do this:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt># (If your python installation does not require root access to install, remove "sudo" from the next two commands)

cd /tmp &amp;&amp; git clone --recursive --depth 1 -b nucleator_distribution git://github.com/47lining/ansible.git &amp;&amp; cd ansible &amp;&amp; sudo python setup.py install

sudo pip install --upgrade git+git://github.com/47lining/nucleator-core.git

nucleator init</tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_step_2_fork_the_public_nucleator_core_siteconfig_github_repository">STEP 2 - FORK THE PUBLIC nucleator-core-siteconfig GITHUB REPOSITORY</h2>
<div class="sectionbody">
<div class="paragraph"><p>For your first use of Nucleator, this quickstart recommends that you use a public siteconfig.  Once you&#8217;ve seen how Nucleator Cages and Stacksets work, you can create a private siteconfig repository and provide Nucleator with a distribution key to access it.  (For more information on setting up a github account see <code>https://help.github.com/articles/set-up-git/</code> )</p></div>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
log into github and navigate to <a href="https://github.com/47lining/nucleator-core-siteconfig">https://github.com/47lining/nucleator-core-siteconfig</a>
</p>
</li>
<li>
<p>
Fork your own copy of this repository into your github account by clicking the "fork" button in the upper right
</p>
</li>
<li>
<p>
Note the clone https URL for your personal siteconfig repository
</p>
</li>
<li>
<p>
create a local clone:
</p>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cd &lt;place_where_you_create_git_clones&gt;
git clone &lt;clone_url_noted_above&gt;</tt></pre></div></div>
</li>
</ol></div>
</div>
</div>
<div class="sect1">
<h2 id="_step_3_update_stackset_sources_to_use_your_personal_siteconfig">STEP 3 - UPDATE STACKSET SOURCES TO USE YOUR PERSONAL SITECONFIG</h2>
<div class="sectionbody">
<div class="paragraph"><p>Edit the Stackset sources list in <code>~/.nucleator/sources.yml</code> and change
the siteconfig stanza to include the <code>&lt;clone_url_noted_above&gt;</code>.
Use the <code>git://</code> protocol so authentication is not required (just replace
the <code>https://</code> in the https clone url with <code>git://</code>).  After an initial
pass through the quickstart, you can read the User&#8217;s Guide to learn more
about how to specify a private repository in <code>sources.yml</code>.</p></div>
<div class="paragraph"><p>Do this:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cd ~/.nucleator
nano sources.yml # modify to include siteconfig below</tt></pre></div></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt># siteconfig - Nucleator customer- and cage- specific configuration
- src: git+git://github.com/&lt;your_github_account&gt;/nucleator-core-siteconfig.git
  version: master
  name: siteconfig</tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_step_4_sign_up_for_new_aws_account">STEP 4 - SIGN UP FOR NEW AWS ACCOUNT</h2>
<div class="sectionbody">
<div class="paragraph"><p>You may be able to use an existing AWS Account with Nucleator, but we suggest creating a new one.  Nucleator makes it easy to manage AWS Resources across AWS Account boundaries, and AWS Accounts serve as very useful containers and boundaries for AWS Resources</p></div>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
To create a new AWS Account, visit the AWS Console: <a href="https://console.aws.amazon.com/">https://console.aws.amazon.com/</a>
</p>
</li>
<li>
<p>
Choose "I am a new user" to create a new AWS Account
</p>
</li>
<li>
<p>
If you are visiting the console using your AWS Console shortcut link for
   an existing account, you will need to choose the small link "Sign-in using
   root account credentials" beneath the Sign In button to get to the "Sign In
   or Create an AWS Account" Page
</p>
</li>
<li>
<p>
Complete the Account Signup process using the conventions described below
</p>
<div class="paragraph"><p><strong>Account Name:</strong> <code>&lt;youraccountname&gt;-&lt;yourcustomername&gt;</code></p></div>
<div class="paragraph"><p><strong>Account Email:</strong> <code>&lt;youraccountname&gt;.accounts.aws.&lt;yourcustomername&gt;@&lt;customer_domain.com&gt; # recommended convention</code></p></div>
<div class="paragraph"><p><strong>Console Shortcut:</strong> <code>https://&lt;youraccountname&gt;-&lt;yourcustomername&gt;.signin.aws.amazon.com/console</code></p></div>
</li>
</ol></div>
</div>
</div>
<div class="sect1">
<h2 id="_step_5_perform_minimal_configuration_in_new_aws_account">STEP 5 - PERFORM MINIMAL CONFIGURATION IN NEW AWS ACCOUNT</h2>
<div class="sectionbody">
<div class="paragraph"><p>Using the AWS Console, perform the following minimal steps within your AWS Account</p></div>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
Create a new IAM User in the new AWS Account.  Name the user: <code>NucleatorUser</code>
</p>
<div class="paragraph"><p>Note: This user is used as a Prinicipal in trust policies estabished by Nucleator.
It needs to be spelled correctly for the role provisioning process described later
to succeed.</p></div>
</li>
<li>
<p>
During the creation of the user, generate an Access Key for the user and be
   sure to download this creditional before closing the "successful completion"
   screen.  Retain the downloaded IAM Credentials for <code>NucleatorUser</code>.
   You will need to use these during the configuration process for Nucleator later.
   You will not be able to reaccess this Access Key information later.
</p>
</li>
<li>
<p>
Create a new group called NucleatorBootstrapGroup.
</p>
</li>
<li>
<p>
Add a User Policy to NucleatorBootstrapGroup by expanding the "Inline Policies" section
   of the group description screen.  Select a custom policy and copy and paste
   the policy listed below; name the policy <code>NucleatorGroupPolicy</code> and apply it.
</p>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    {
        "Version": "2012-10-17",
        "Statement": [
            {
                "Sid": "NucleatorUserMinimalAccess",
                "Effect": "Allow",
                "Action": [
                    "iam:CreateRole",
                    "iam:DeleteRolePolicy",
                    "iam:GetRole",
                    "iam:GetRolePolicy",
                    "iam:ListRolePolicies",
                    "iam:PutRolePolicy",
                    "iam:UpdateAssumeRolePolicy",
                    "ec2:DescribeRegions",
                    "ec2:DescribeAvailabilityZones"
                ],
                "Resource": "*"
            }
        ]
    }
d. Add NucleatorUser to NucleatorBootstrapGroup by clicking the Add Users to Group button from the group description screen. Select NucleatorUser and click Add Users.</tt></pre></div></div>
</li>
</ol></div>
</div>
</div>
<div class="sect1">
<h2 id="_step_6_create_initial_config_for_customer_account_and_cage">STEP 6 - CREATE INITIAL CONFIG FOR CUSTOMER, ACCOUNT AND CAGE</h2>
<div class="sectionbody">
<div class="paragraph"><p>You can either perform this step manually or use the <a href="Use-the-Nucleator-Setup-Wizard-to-Create-an-Initial-Siteconfig_22053489.html">Nucleator Setup Wizard</a>.</p></div>
<div class="paragraph"><p>We recommend starting with the wizard, as it produces files that will help you to understand the structure of the config files described below.</p></div>
<div class="sect2">
<h3 id="_to_use_the_wizard">To use the wizard</h3>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
In your local clone of your personal fork of <code>nucleator-core-siteconfig</code>,
   navigate to directory <code>ansible/roles/siteconfig/vars/</code>.
</p>
</li>
<li>
<p>
invoke the wizard:
</p>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>nucleator setup wizard</tt></pre></div></div>
</li>
</ol></div>
</div>
<div class="sect2">
<h3 id="_to_perform_steps_manually">To perform steps manually</h3>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
In your local clone of your personal fork of <code>nucleator-core-siteconfig</code>,
   navigate to directory <code>ansible/roles/siteconfig/vars/</code>, and copy the <code>{customer}.yml</code> customer configuration templates
   to a customer configuration file based on your customer name. For example, if your customer name is <code>quickstart</code>, then the
   customer configuration file would be named <code>quickstart.yml</code>
</p>
</li>
<li>
<p>
Open the file and make the following changes:
</p>
<div class="ulist"><ul>
<li>
<p>
Set the customer domain to the desired DNS subdomain that you&#8217;d like to use for this customer.  For example <code>nucle8r.io</code>, or <code>somedepartment.mycompany.com</code>
</p>
</li>
<li>
<p>
Inside the Cage names section, set the friendly account name, region, and owner of each Cage.
   Note: There must be one Cage named <code>build</code> to work as a starting point for Nucleator
</p>
</li>
<li>
<p>
Inside the aws_accounts section, set the Account number and Region for each account associated with the customer
</p>
</li>
<li>
<p>
Nucleator can work with multiple AWS Accounts for each Customer.  These are specified
   in aws_accounts in the customer config.  Each specified AWS Account includes the following fields
</p>
<div class="ulist"><ul>
<li>
<p>
Friendly account_name - this is a name for the Account that is readable by humans.  It is used elsewhere in Nucleator config and in Jenkins pulldowns that are set up by Nucleator, where choices among AWS Accounts must occur
</p>
</li>
<li>
<p>
account_number - this is the unique twelve-digit Account number provided by AWS for this AWS Account. The account number can be found by selecting the "Support" | "Support Center" pulldown from your AWS console. Your Account number will appear at the upper right of the Support Center page
</p>
</li>
<li>
<p>
bootstrap_region - this is the AWS Region where Nucleator will create Amazon resources within this Account that it needs to support the creation of Cages and Stacksets
</p>
</li>
</ul></div>
</li>
<li>
<p>
map_region_plus_redundant_zone_number_to_vpc_valid_az - Region to Availability Zone Mapping that specifies which AZ&#8217;s are valid for provisioning VPC subnets within the Account. This can be set by going to the AWS console &#8594; VPCs &#8594; Subnets &#8594; Create Subnet &#8594; and grabbing the first two list items of the Availability Zone dropdown. Note: Will need to change the Region in the top right of the AWS console to grab the Availability Zones for the different Regions
</p>
</li>
</ul></div>
</li>
<li>
<p>
Copy the <code>{customer}-{cage}.yml</code> file for each Cage specified in your customer configuration file. For example, when done there should be a file for each Cage named something like <code>mycustomer-build.yml</code>
</p>
</li>
<li>
<p>
In your <code>~/.nucleator</code> directory, copy the <code>{customer}-credentials.yml</code> to use your Customer name
</p>
</li>
<li>
<p>
Open the file and fill in the <code>aws_access_key_id</code> and <code>aws_secret_access_key</code> for each account in the specified customer. These values are the saved values that were presented  when <code>NucleatorUser</code> was created
</p>
</li>
</ol></div>
</div>
<div class="sect2">
<h3 id="_note">NOTE</h3>
<div class="paragraph"><p>On Accounts that pre-date AWS' introduction of VPCs it is possible
that the setup wizard may choose availability zones (AZ) in the
<code>&lt;customer&gt;.yml</code> siteconfig file that are not VPC-capable.  If this
occurs Nucleator cage provision will fail.  Please reference the
<a href="Troubleshooting-Tips_22052899.html">Troubleshooting Tips</a> for more
details on this issue and how to address it.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_step_7_generate_and_provide_cage_specific_self_signed_ssl_certificates">STEP 7 - GENERATE AND PROVIDE CAGE-SPECIFIC SELF-SIGNED SSL CERTIFICATES</h2>
<div class="sectionbody">
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
decide on a password to use to protect the private keys and certificates
   that you will generate in the steps below.  Enter this password as the
   value for the <code>pkcs12_bundle_password</code> key in your customer credentials
   file at <code>~/.nucleator/&lt;customer&gt;-credentials.yml</code>
</p>
</li>
<li>
<p>
In your local clone of your personal fork of <code>nucleator-core-siteconfig</code>,
   navigate to directory <code>ansible/roles/siteconfig/vars/</code>.
</p>
</li>
<li>
<p>
Run the following command by filling in the variables:
</p>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>./make-certificate-bundle &lt;customer_name&gt; &lt;cage_name&gt; &lt;customer_domain&gt; &lt;pkcs12_bundle_password&gt;</tt></pre></div></div>
</li>
<li>
<p>
Repeat for all cages.  Use the customer_name, customer_domain and each
   cage_name that you specified during STEP 6.  Use the
   pkcs12_bundle_password that you specified in STEP 7.a.
</p>
</li>
</ol></div>
</div>
</div>
<div class="sect1">
<h2 id="_step_8_commit_your_siteconfig_updates">STEP 8 - COMMIT YOUR SITECONFIG UPDATES</h2>
<div class="sectionbody">
<div class="paragraph"><p>Whenever siteconfig files are generated and/or updated, you must
commit them to your github repository so that Nucleator will be able
to use them.  While still in you local clone you can review the config
file changes that the wizard has made, or that you have manually made:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>git status
git diff</tt></pre></div></div>
<div class="paragraph"><p>Add, commit and push your updated configuration:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>git add --all :/
git commit -m "updated config with customer &lt;a&gt;, account &lt;b&gt; and cage &lt;c&gt;"
git push</tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_step_9_nucleator_update">STEP 9 - NUCLEATOR UPDATE</h2>
<div class="sectionbody">
<div class="paragraph"><p>Do this:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>nucleator update</tt></pre></div></div>
<div class="paragraph"><p>Nucleator update pulls current copies of all Stacksets that you have chosen to be part of your Nucleator installation.  You should run <code>nucleator update</code> whenever:</p></div>
<div class="ulist"><ul>
<li>
<p>
you add Stacksets to your selected sources
</p>
</li>
<li>
<p>
you change the version of a Stackset you are using
</p>
</li>
<li>
<p>
you modify a Stackset without changing the Stackset version, and you want Nucleator to see those changes
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_step_10_provision_nucleator_roles_in_your_account">STEP 10 - PROVISION NUCLEATOR ROLES IN YOUR ACCOUNT</h2>
<div class="sectionbody">
<div class="paragraph"><p>Nucleator needs to establish some attributes in your account like iam roles in order to execute correctly.  To do this run:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>    nucleator account rolespec provision --customer &lt;yourcustomername&gt; --account &lt;youraccountname&gt;

    # to ensure all the roles were created successfully
    nucleator account rolespec validate --customer &lt;yourcustomername&gt; --account &lt;youraccountname&gt;</tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_step_11_account_setup">STEP 11 - ACCOUNT SETUP</h2>
<div class="sectionbody">
<div class="paragraph"><p>Next Nucleator needs to set up specific account resources for proper operation such as creating s3 buckets.  To do this run:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>PYTHONUNBUFFERED=1 nucleator account setup --customer &lt;yourcustomername&gt; --account &lt;youraccountname&gt; | tee /tmp/account_setup.out</tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="_step_12_dns_setup">STEP 12 - DNS SETUP</h2>
<div class="sectionbody">
<div class="paragraph"><p>More detailed instructions on DNS set-up are in the User&#8217;s Guide section entitled <a href="Prepare-AWS-Account---Set-Up-DNS-for-Cages-Defined-within-your-Account_22053669.html">Prepare AWS Account - Set Up DNS for Cages Defined within your Account</a> You will need an externally resolvable Subdomain to which you have authority to add Nameserver records.</p></div>
<div class="paragraph"><p>For each Cage that you have defined for your Customer:</p></div>
<div class="olist loweralpha"><ol class="loweralpha">
<li>
<p>
In the AWS console go to Route53 &#8594; Hosted Zones and select the hosted zone created by account setup for the current Cage.  "Go to Record Sets".
</p>
</li>
<li>
<p>
Copy the Name Servers of the Hosted Zone by selecting its single <code>NS</code> record, and selecting and copying the four nameservers from the pane on the right.
</p>
</li>
<li>
<p>
Go to the system that you use to maintain authoritative <code>NS</code> records for the <code>customer_domain</code> that you specified during step 6.
</p>
<div class="ulist"><ul>
<li>
<p>
Add a single <code>NS</code> record with the name of the current Cage and a value that specifies the four nameservers copied above.
</p>
<div class="paragraph"><p>For example, for customer_domain <code>somedepartment.mycompany.com</code> and Cage <code>build</code>, you will create an NS record <code>build.somedepartment.mycompany.com</code> with a value that specifies the four nameservers copied above.</p></div>
</li>
</ul></div>
</li>
<li>
<p>
Verify that the DNS updates have propagated
</p>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>dig +short NS build.somedepartment.mycompany.com</tt></pre></div></div>
</li>
</ol></div>
</div>
</div>
<div class="sect1">
<h2 id="_step_13_provision_and_configure_cage">STEP 13 - PROVISION AND CONFIGURE CAGE</h2>
<div class="sectionbody">
<div class="paragraph"><p>You can now provision and configure your first Nucleator Cage:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>PYTHONUNBUFFERED=1 nucleator cage provision --customer &lt;yourcustomername&gt; --cage build | tee /tmp/cage_provision.out
PYTHONUNBUFFERED=1 nucleator cage configure --customer &lt;yourcustomername&gt; --cage build | tee /tmp/cage_configure.out</tt></pre></div></div>
<div class="paragraph"><p>Note that it can take a few minutes for cage resources to be provisioned and
become available. You can use the CloudFormation AWS console to see the
current status and progress of provisioning while these commands are running.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_step_14_create_a_builder_stackset">STEP 14 - CREATE A BUILDER STACKSET</h2>
<div class="sectionbody">
<div class="paragraph"><p>Nucleator supports several Stacksets that can be created within a cage.  The Builder Stackset provides a user interface for creating additional Stacksets.  To do this run:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>PYTHONUNBUFFERED=1 nucleator builder provision --customer &lt;yourcustomername&gt; --cage build | tee /tmp/builder_provision.out
PYTHONUNBUFFERED=1 nucleator builder configure --customer &lt;yourcustomername&gt; --cage build | tee /tmp/builder_configure.out</tt></pre></div></div>
<div class="paragraph"><p>Note that it can take some time for builder resources to be provisioned and
become available. You can use the CloudFormation AWS console to see the
current status and progress of provisioning while these commands are running.</p></div>
<div class="paragraph"><p>Once complete the Nucleator user interface can be accessed at <code>https://nucleator-ui.&lt;cage&gt;.&lt;customer_domain&gt;</code>.  Initial login credentials are available in <code>~/.nucleator/&lt;customer&gt;-credential.yml</code>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_summary">SUMMARY</h2>
<div class="sectionbody">
<div class="paragraph"><p>You should now have a configured Cage and Builder Stackset. To provision other Stacksets such as Beanstalk or Redshift, see the documentation for those specific commands. You can also re-run step 12 with any Cage that has been configured in step 6 to provision more Cages.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_see_also">SEE ALSO</h2>
<div class="sectionbody">
<div class="paragraph"><p><a href="20545561.html">The Nucleator User&#8217;s Guide</a>,
<a href="Glossary_22053389.htmlnucleatorglossary">Nucleator Glossary</a></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_nucleator">NUCLEATOR</h2>
<div class="sectionbody">
<div class="paragraph"><p>Part of the <a href="nucleator.html">nucleator(1)</a> suite</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2016-01-28 15:28:15 MST
</div>
</div>
</body>
</html>
