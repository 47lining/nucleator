<!DOCTYPE html>
<html>
  <head>
    <title>Nucleator: Nucleator Configuration Process Overview</title>
    <link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/tips.css" type="text/css" />
    <link rel="stylesheet" href="../css/syntaxhighlighter.css" type="text/css" />
    <link rel="stylesheet" href="../css/sh-theme-rdark.css" type="text/css" />
    <script type="text/javascript" src="../css/syntaxhighlighter.js" ></script>
    <script type="text/javascript" src="../css/syntaxhighlighter-brushes.js" ></script>
    <script type="text/javascript">
      SyntaxHighlighter.all()
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, maximum-scale=1.0, minimum-scale=1.0, initial-scale=1" />
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <meta name="Author" content="47Lining LLC">
    <meta name="description" content="47Lining LLC: Nucleator DevOps Acceleration Tools">
    <meta name="keywords" content="Cloud, AWS, Amazon Web Services, Nucleator, Cloud, AWS, Amazon Web Services, Cloud Platform Operations, DevOps, Ansible">
    <link rel="stylesheet" type="text/css" href="../css/screen_styles.css" />
    <link rel="stylesheet" type="text/css" href="../css/screen_layout_large.css" />
    <link rel="stylesheet" type="text/css" media="only screen and (min-width:50px) and (max-width:1000px)" href="../css/screen_layout_small.css">
    <!--[if lt IE 9]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-58429312-2', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <div class="page">
      <div class="secondaryHeader">
	<a class="secondaryLogo" href="../index.html"></a>
      </div>
      <article>
        <div id="breadcrumb-section">
          <ol id="breadcrumbs">
	    	    <li>
	      <span><a href="Nucleator-Documentation_22052969.html">Nucleator Documentation</a></span>
	    </li>
	    	    <li>
	      <span><a href="20545561.html">User&#39;s Guide</a></span>
	    </li>
	    	    <li>
	      <span><a href="How-to-Use-Nucleator_21463194.html">How to Use Nucleator</a></span>
	    </li>
	    	    <li>
	      <span><a href="Installing-and-Configuring-Nucleator_21463207.html">Installing and Configuring Nucleator</a></span>
	    </li>
	              </ol>
        </div>
        <h1>Nucleator Configuration Process Overview</h1>
        <div class="panel" style="border-width: 1px;"><div class="panelContent">
<span>Why Nucleator supports multiple AWS Accounts and Customers. What's contained in your siteconfig and an overview of the process used to configure Nucleator.</span>
</div></div><p> </p><p> </p>    <div class="aui-message success shadowed information-macro">
                    <p class="title">Review Siteconfig Concepts and Nucleator Configuration Process</p>
                            <span class="aui-icon icon-success">Icon</span>
                <div class="message-content">
                            <ul class="inline-task-list" data-inline-tasks-content-id="20545625">
<li data-inline-task-id="1"><span>Nucleator supports relationships among a Service Provider's multiple Customers, AWS Accounts, and Cages. Review the <a href="Nucleator-Configuration-Process-Overview_20545625.html">Siteconfig Overview</a> section to learn about this.</span></li>
<li data-inline-task-id="2"><span>Nucleator makes the simplest case really easy. Review the <a href="Nucleator-Configuration-Process-Overview_20545625.html">Nucleator Configuration Process</a> section for an overview of the steps you will take.</span></li>
</ul>


                    </div>
    </div>
<p> </p><p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1426743015238 {padding: 0px;}
div.rbtoc1426743015238 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1426743015238 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1426743015238'>
<ul class='toc-indentation'>
<li><a href='#NucleatorConfigurationProcessOverview-siteconfig_overviewSiteconfigOverview'>Siteconfig Overview</a>
<ul class='toc-indentation'>
<li><a href='#NucleatorConfigurationProcessOverview-NamingConventions'>Naming Conventions</a>
<ul class='toc-indentation'>
<li><a href='#NucleatorConfigurationProcessOverview-CustomerName'>Customer Name</a></li>
<li><a href='#NucleatorConfigurationProcessOverview-AccountFriendlyName'>Account Friendly Name</a></li>
</ul>
</li>
<li><a href='#NucleatorConfigurationProcessOverview-SiteconfigContents'>Siteconfig Contents</a>
<ul class='toc-indentation'>
<li><a href='#NucleatorConfigurationProcessOverview-siteconfigdirectory'>siteconfig directory</a></li>
<li><a href='#NucleatorConfigurationProcessOverview-per-CustomerDNSResolutionInformation'>per-Customer DNS Resolution Information</a></li>
<li><a href='#NucleatorConfigurationProcessOverview-per-CustomerAWSAccountInformation'>per-Customer AWS Account Information</a></li>
<li><a href='#NucleatorConfigurationProcessOverview-NucleatorCagesdefinedforeachCustomer'>Nucleator Cages defined for each Customer</a></li>
<li><a href='#NucleatorConfigurationProcessOverview-per-Cageconfigurationinformation'>per-Cage configuration information</a></li>
<li><a href='#NucleatorConfigurationProcessOverview-Customer-specificcredentials'>Customer-specific credentials</a></li>
</ul>
</li>
<li><a href='#NucleatorConfigurationProcessOverview-Nucleator&#39;ssiteconfigwizard'>Nucleator&#39;s siteconfig wizard</a></li>
</ul>
</li>
<li><a href='#NucleatorConfigurationProcessOverview-nucleator_configuration_processNucleatorConfigurationProcess'>Nucleator Configuration Process</a></li>
</ul>
</div></p><h2 id="NucleatorConfigurationProcessOverview-siteconfig_overviewSiteconfigOverview"><span class="confluence-anchor-link" id="NucleatorConfigurationProcessOverview-siteconfig_overview"></span>Siteconfig Overview</h2><p>Nucleator makes it easy for a Service Provider to manage related sets of AWS Infrastructure for multiple internal or external sets of stakeholders across multiple AWS Accounts.  A &quot;Service Provider&quot; could be a single team within an organization that is servicing multiple internal Customers within their department or enterprise.  A &quot;Service Provider&quot; could also be a company offering managed services to multiple external Customers.  Nucleator calls each group of a Service Provider's internal or external stakeholders a &quot;Customer&quot;.</p><p>The set of relationships among a Service Provider, its Customer(s), their DNS Subdomain(s), AWS Account(s), Account-specific credentials and Nucleator Cage(s) is managed in a set of Nucleator configuration files called the <code>siteconfig</code>.  Because this set of relationships can be quite detailed, the <code>siteconfig</code> is mantained under revision control in git.  A representative siteconfig is kept in the <code>nucleator-core-siteconfig</code> public repository.  You can fork this repository into your own github account so you can capture your initial Customer and Account information.  Nucleator provides a wizard to make it easy to add new Customer's and your AWS Account information to your Siteconfig, so you can commit the info to your siteconfig repository.</p><p>Each Nucleator Customer can use one or more AWS Accounts.  Each AWS Account is always dedicated to a single Nucleator Customer.  </p><p>It is quite common for Service Providers to establish multiple AWS Accounts for use by their internal stakeholders, external stakeholders, partners or customers.  Often, those accounts use AWS' consolidated billing capabilities so that all of the Accounts are tied to a single master Account that is controlled by the Service Provider.  Establishing multiple AWS Accounts provides a number of benefits:</p>    <div class="aui-message hint shadowed information-macro">
                    <p class="title">Benefits of Multiple AWS Accounts</p>
                            <span class="aui-icon icon-hint">Icon</span>
                <div class="message-content">
                            <ul><li>Stronger operational separation between workloads. Reduced ability for one workload to impact another through, for example, Account-level service limits</li><li>Simplified cost accounting and reporting</li><li>Improved security segregation</li><li>Easier tracking and management of provisioned workloads and their supporting Cloud resources</li><li>Strengthened organizational accountability model</li></ul>
                    </div>
    </div>
<p>Even though Nucleator supports multiple Customers and AWS Accounts, to get started with Nucleator, we will establish a single new AWS Account for use with a single Nucleator Customer.  The <code>nucleator setup wizard</code> command makes it very straightforward to generate this initial siteconfig.  In the future, it is easy to add additional Customers, additional Accounts for each Customer, and to define additional Cages within each Account and represent those in your own siteconfig repository.</p><h3 id="NucleatorConfigurationProcessOverview-NamingConventions">Naming Conventions</h3><p>Nucleator establishes naming conventions so that it can help you to manage multiple AWS Accounts for multiple Customers.  These names allow you to accurately state your intent when interacting with Nucleator.  Nucleator refers to Customers and Accounts as follows:</p><ul><li><p><strong>customer</strong>: a string descriptor of the customer on who's behalf the Account was created.  This may be your own organization, or someone else's.  For example, <code>&quot;47lining&quot;</code>, <code>&quot;mycompany&quot;</code>, <code>&quot;mycustomer&quot;</code>, <code>&quot;mydepartment&quot;</code></p></li><li><strong>account:</strong> a string descriptor of the underlying purpose of the account.  For example, <code>&quot;master&quot;</code>, <code>&quot;test1&quot;</code>, <code>&quot;analytics&quot;</code>, <code>&quot;research&quot;</code>, <code>&quot;adhoc&quot;</code></li></ul><h4 id="NucleatorConfigurationProcessOverview-CustomerName">Customer Name</h4><p>The &quot;Customer Name&quot; is used to refer to a particular Nucleator Customer within Nucleator's configuration files, within commands invoked through Nucleator's command line interface, and within Jobs invoked through Nucleator's Jenkins-based User Interface.  Nucleator refers to Customer Name as <code>customer</code>, or sometimes as <code>customer_name</code>.</p><p>Note that Customer name must contain only lowercase alphanumeric characters and the dash character.  The Customer name will be used in S3 bucket names and AWS CloudFormation template names, which must follow this convention. If a customer name that does not match these restrictions is used, the command line tool will print an error message noting that the customer name is invalid.</p><p>Customer name will be combined with account and cage names by nucleator to ensure that AWS resources such as S3 buckets and CloudFormation templates have unique and meaningful names.  Some of the AWS Resources that are named in this way have length limitations, and choosing a very long Customer name can contribute to exceeding those limitations.  If the combined name for an AWS Resource exceeds a known length limit, Nucleator will truncate the combined name and add a unique hash such that the resulting string conforms to the limit.</p><h4 id="NucleatorConfigurationProcessOverview-AccountFriendlyName">Account Friendly Name</h4><p>The Account &quot;Friendly Name&quot; is used as a convenient way to refer to one of a particular Customer's AWS Accounts.  It must be unique within the Customer.  The Account Friendly Name is intended to be meaningful and friendly to humans - it maps to an AWS Account Number, but is much easier to use and remember.  Nucleator refers to the Account Friendly Name as <code>account</code>, or sometimes as <code>account_name</code>.</p><p>Like the Customer name, the account name may contain only lowercase alphanumeric characters and the dash character. If an account name is used that does not meet these restrictions the command line tool will print an error noting that the account name is invalid.</p><p>Account name will be combined with customer and cage names by nucleator to ensure that AWS resources such as S3 buckets and CloudFormation templates have unique and meaningful names.  Some of the AWS Resources that are named in this way have length limitations, and choosing a very long Account Friendly name can contribute to exceeding those limitations.  If the combined name for an AWS Resource exceeds a known length limit, Nucleator will truncate the combined name and add a unique hash such that the resulting string conforms to the limit.</p><h3 id="NucleatorConfigurationProcessOverview-SiteconfigContents">Siteconfig Contents</h3><p>Nucleator expects a set of configuration files, referred to collectively as the Nucleator <code>siteconfig</code>, to define the Customer(s) that your Nucleator installation is aware of, the AWS Accounts for each of those Customers, the Nucleator Cages that are available, and other Customer- and deployment-specific choices.  You manage the <code>siteconfig</code> that you would like Nucleator to use in your own git repository.  Nucleator will install it the same way it installs other Nucleator Stacksets.  Some information that is logically part of your siteconfig is sensitive in nature.  This information is not kept in git but in a Nucleator configuration directory.  <code style="line-height: 1.4285715;">siteconfig</code> contains the following information and structure:</p><h4 id="NucleatorConfigurationProcessOverview-siteconfigdirectory">siteconfig directory</h4><p>Customer-specific configurations are maintained in your own git repository.  Nucleator will access your siteconfig repository in the same way that it accesses other Nucleator Stacksets that you have selected, and exports its contents to <code>~/.nucleator/siteconfig/</code>.  You should always make changes to your siteconfig via a local clone, commiting and pushing your changes.  You can use git's standard capabilities to make changes to your siteconfig repo on a branch, and only merge them to the branch that Nucleator is using when you are ready for the changes to take effect. </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: RDark; brush: bash; gutter: false" style="font-size:12px;">~/.nucleator/siteconfig/
    &lt;customer_name&gt;.yml # customer configuration file for &lt;customer_name&gt;
	&lt;customer_name&gt;-&lt;cage_name&gt;.yml # cage configuration file for cage &lt;cage_name&gt; for customer &lt;customer_name&gt;
</pre>
</div></div><p><span>To facilitate review of the siteconfig that Nucleator is using, <code>nucleator init</code> creates a <code>siteconfig</code> symlink within your <code>~/.nucleator</code> configuration directory to enable easy access to the Customer and Cage configuration files within the sitek=config that is obtained from revision control. </span>The source for the <code style="line-height: 1.4285715;">siteconfig</code> repository that Nucleator uses is specified in <code style="line-height: 1.4285715;">~/.nucleator/sources.yml</code> and cloned via <code style="line-height: 1.4285715;">nucleator update. </code>The target of the <code style="line-height: 1.4285715;">siteconfig</code> symlink is <code style="line-height: 1.4285715;">~/.nucleator/contrib/siteconfig/ansible/roles/siteconfig/vars/</code></p><p><code>nucleator-core-siteconfig</code> includes a Customer configuration template for a new customer in <code>{customer}.yml </code>and an example, completed Customer configuration file in <code>example.yml </code>at <code>ansible/roles/siteconfig/vars/</code> within the <code>nucleator-core-siteconfig</code> repository.  You should always make changes to your <code>siteconfig</code> in git so that they can be reliably versioned, shared, persisted and made available to Nucleator via <code>nucleator update</code>.</p><h4 id="NucleatorConfigurationProcessOverview-per-CustomerDNSResolutionInformation">per-Customer DNS Resolution Information</h4><p>In Nucleator, each Customer is assigned a DNS domain (<code>customer_domain</code>) within the customer's config file.  Nucleator creates a Route53 Hosted Zone for each Cage defined for that Customer as part of the Account setup process.  Whenever a defined Cage for that Customer is provisioned, the resulting Nucleator resources become resolvable via DNS within that Cage's Hosted Zone.  For example, if a Customer's <code>customer_domain</code> is <code>nucleator.customername.com</code>, and a <code>poc</code> Cage is defined for that customer, when the poc Cage is provisioned the bastion instance for the Cage becomes available at <code>bastion.poc.nucleator.customername.com</code></p><p>Nucleator currently supports external DNS. </p><h4 id="NucleatorConfigurationProcessOverview-per-CustomerAWSAccountInformation">per-Customer AWS Account Information</h4><p>Each Nucleator Customer can use one or more AWS Accounts.  Each AWS Account is always dedicated to a single Nucleator Customer.  The friendly names and corresponding account numbers of each AWS Accounts used by a Customer are captured in the customer's config file.</p><h4 id="NucleatorConfigurationProcessOverview-NucleatorCagesdefinedforeachCustomer">Nucleator Cages defined for each Customer</h4><p>Multiple Nucleator Cages can be defined for each Customer.  Each Cage can reside in a specified AWS Region within a selected AWS Account used by that Customer.  The defined Cages for each Customer and the mapping of each Cage to AWS Account and AWS Region are captured in the customer's config file. </p><h4 id="NucleatorConfigurationProcessOverview-per-Cageconfigurationinformation">per-Cage configuration information</h4><p>Each Cage for each Customer also has a Cage config file that defines the subnet configuration used by the Cage.</p><h4 id="NucleatorConfigurationProcessOverview-Customer-specificcredentials">Customer-specific credentials</h4><p>Nucleator uses authorization information provided as part of config.  While logically part of the siteconfig, Customer-specific authorization information (for example, IAM credentials used to bootstrap the Account preparation process and initial passwords used by Nucleator Stacksets) should not be committed to git and as such are not maintained in the <code>siteconfig</code> directory.  Instead, such info is maintained in <code>~/.nucleator/&lt;customer_name&gt;-credentials.yml</code></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: RDark; brush: bash; gutter: false" style="font-size:12px;">~/.nucleator/
    &lt;customer_name&gt;-credentials.yml # customer credentials config file for &lt;customer_name&gt;
</pre>
</div></div><h3 id="NucleatorConfigurationProcessOverview-Nucleator&#39;ssiteconfigwizard">Nucleator's siteconfig wizard</h3><p>The <code>nucleator setup wizard</code> command can be used to generate a new configuration including all configuration files required in your <code>siteconfig</code> as well as customer-specific credentials files in <code>~/.nucleator/</code></p><p>This makes it straightforward to add additional Customers and AWS Accounts to Nucleator, to review the resulting config files in <code>siteconfig</code> and to modify or extend the resulting <code>siteconfig</code> files if needed. </p><h2 id="NucleatorConfigurationProcessOverview-nucleator_configuration_processNucleatorConfigurationProcess"><span class="confluence-anchor-link" id="NucleatorConfigurationProcessOverview-nucleator_configuration_process"></span>Nucleator Configuration Process</h2><p><img class="confluence-embedded-image" src="attachments/20545625/22282385.png" data-image-src="attachments/20545625/22282385.png"></p><p>In each of the next Sections of the User's Guide, you will follow the process above to establish your own siteconfig repository, sign up for an AWS Account to use with Nucleator, and use the <code>nucleator setup wizard</code> to create a Nucleator config for your initial Nucleator Customer, using the initial AWS Account that you have created.</p>    <div class="aui-message success shadowed information-macro">
                    <p class="title">Install and Configure Nucleator</p>
                            <span class="aui-icon icon-success">Icon</span>
                <div class="message-content">
                            <ul class="inline-task-list" data-inline-tasks-content-id="20545625">
<li data-inline-task-id="3">Review Nucleator siteconfig structure and configuration process (this page)</li>
<li data-inline-task-id="8"><a href="Installing-Nucleator_21463209.html">Install Nucleator</a></li>
<li data-inline-task-id="9"><a href="Creating-your-own-Siteconfig-Repository_22054061.html">Create your own siteconfig git repository</a></li>
<li data-inline-task-id="4"><a href="Sign-Up-for-New-AWS-Account-using-Nucleator-Naming-Conventions_20545589.html">Sign Up for New AWS Account using Nucleator Naming Conventions</a></li>
<li data-inline-task-id="5"><a href="Establish-IAM-Users-and-Minimal-Configuration-in-New-AWS-Account_21464022.html">Establish IAM Users and Minimal Configuration in New AWS Account</a></li>
<li data-inline-task-id="6"><a href="Use-the-Nucleator-Setup-Wizard-to-Create-an-Initial-Siteconfig_22053489.html">Use the Nucleator Setup Wizard to Create an Initial Siteconfig</a></li>
<li data-inline-task-id="7"><a href="22053491.html">Include Additional Customers, Accounts and Cages in your siteconfig</a></li>
<li data-inline-task-id="10"><a href="Update-Chosen-Stacksets_22054084.html">Update Chosen Stacksets</a></li>
</ul>


                    </div>
    </div>
<p> </p><hr /><p><span><span>Next: <a href="Installing-Nucleator_21463209.html">Installing Nucleator</a><br /></span></span></p>
      </article>
      <div class="clear-fix"></div>
      <div class="secondaryNav">
	<a href="../installation.html">Installation</a>
	<a href="index.html">Documentation</a>
	<a href="../releases.html">Releases</a>
	<a href="../license.html">License</a>
	<a href="../community.html">Community</a>
      </div>
      <footer>
	&copy; Copyright 2015, <a href="http://www.47lining.com" target="_blank">47Lining, LLC</a>
      </footer>
    </div>   </body>
</html>
