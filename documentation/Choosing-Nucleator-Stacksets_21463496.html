<!DOCTYPE html>
<html>
  <head>
    <title>Nucleator: Choosing Nucleator Stacksets</title>
    <link rel="stylesheet" href="../css/site.css" type="text/css" />
    <link rel="stylesheet" href="../css/tips.css" type="text/css" />
    <link rel="stylesheet" href="../css/syntaxhighlighter.css" type="text/css" />
    <link rel="stylesheet" href="../css/sh-theme-rdark.css" type="text/css" />
    <script type="text/javascript" src="../css/syntaxhighlighter.js" ></script>
    <script type="text/javascript" src="../css/syntaxhighlighter-brushes.js" ></script>
    <script type="text/javascript">
      SyntaxHighlighter.all()
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, maximum-scale=1.0, minimum-scale=1.0, initial-scale=1" />
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <meta name="Author" content="47Lining LLC">
    <meta name="description" content="47Lining LLC: Nucleator DevOps Acceleration Tools">
    <meta name="keywords" content="Cloud, AWS, Amazon Web Services, Nucleator, Cloud, AWS, Amazon Web Services, Cloud Platform Operations, DevOps, Ansible">
    <link rel="stylesheet" type="text/css" href="../css/screen_styles.css" />
    <link rel="stylesheet" type="text/css" href="../css/screen_layout_large.css" />
    <link rel="stylesheet" type="text/css" media="only screen and (min-width:50px) and (max-width:1000px)" href="../css/screen_layout_small.css">
    <!--[if lt IE 9]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-58429312-2', 'auto');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <div class="page">
      <div class="secondaryHeader">
	<a class="secondaryLogo" href="../index.html"></a>
      </div>
      <article>
        <div id="breadcrumb-section">
          <ol id="breadcrumbs">
	    	    <li>
	      <span><a href="Nucleator-Documentation_22052969.html">Nucleator Documentation</a></span>
	    </li>
	    	    <li>
	      <span><a href="20545561.html">User&#39;s Guide</a></span>
	    </li>
	    	    <li>
	      <span><a href="How-to-Use-Nucleator_21463194.html">How to Use Nucleator</a></span>
	    </li>
	    	    <li>
	      <span><a href="Installing-and-Configuring-Nucleator_21463207.html">Installing and Configuring Nucleator</a></span>
	    </li>
	              </ol>
        </div>
        <h1>Choosing Nucleator Stacksets</h1>
        <div class="panel" style="border-width: 1px;"><div class="panelContent">
How to initialize your configuration structure and tell Nucleator which public and private Stacksets you want to use.
</div></div><p><span style="color: rgb(255,0,0);"> </span></p><p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1440514510596 {padding: 0px;}
div.rbtoc1440514510596 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1440514510596 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc-macro rbtoc1440514510596'>
<ul class='toc-indentation'>
<li><a href='#ChoosingNucleatorStacksets-ChooseSources'>Choose Sources</a></li>
<li><a href='#ChoosingNucleatorStacksets-EstablishDistributionKeys'>Establish Distribution Keys</a></li>
<li><a href='#ChoosingNucleatorStacksets-UpdateStacksets'>Update Stacksets </a></li>
</ul>
</div></p><p> </p>The first steps with Nucleator are performed using commands entered using the command line interface. For detailed reference, see the <a href="nucleator.html">Nucleator CLI Reference</a>.<h1 id="ChoosingNucleatorStacksets-ChooseSources">Choose Sources</h1>    <div class="aui-message success shadowed information-macro">
                    <p class="title">1. Review and modify sources.yml</p>
                            <span class="aui-icon icon-success">Icon</span>
                <div class="message-content">
                            <ul class="inline-task-list" data-inline-tasks-content-id="21463496">
<li data-inline-task-id="1"><span>Review and update <code>~/.nucleator/sources.yml</code> to include all desired Stacksets</span></li>
</ul>


                    </div>
    </div>
<p>The <code>nucleator init</code> command creates a file named <code>sources.yml</code> in your <code>.nucleator</code> directory. This is a YAML-formatted file that defines which Stacksets and commands should be installed in your Nucleator instance. When you run <code>nucleator update</code> all of the Stacksets listed in <code>sources.yml</code> will installed or updated in your local <code>.nucleator/contrib</code> directory. You can add sections to <code>sources.yml</code> to use more Stacksets by providing a Git URL, name and optional branch name for each desired additional Stackset.</p><p>Each Stackset is represented in <code>sources.yml</code> with an entry like this:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>sources.yml</b></div><div class="codeContent panelContent pdl">
<pre class="theme: RDark; brush: text; gutter: false" style="font-size:12px;">  # Differentiated Additional Nucleator Stackset
  - src: git+ssh://git@projectname-private.repo.com/prj/nucleator-contrib-whizbang.git
    # version: master
    name: whizbang</pre>
</div></div><p>Whenever you update <code style="line-height: 1.4285715;">sources.yml</code> be sure to run <code style="line-height: 1.4285715;">nucleator update</code> to have Nucleator update all Stacksets, pulling each one from its source repository and placing it in your local <code style="line-height: 1.4285715;">.nucleator/contrib</code> directory.</p><h1 id="ChoosingNucleatorStacksets-EstablishDistributionKeys"><span style="line-height: 28.57143px;">Establish Distribution Keys</span></h1>    <div class="aui-message success shadowed information-macro">
                    <p class="title">2. Review and modify distkeys.yml</p>
                            <span class="aui-icon icon-success">Icon</span>
                <div class="message-content">
                            <ul class="inline-task-list" data-inline-tasks-content-id="21463496">
<li data-inline-task-id="3">Add distribution keys and known host information to <code>~/.nucleator/distkeys.yml</code></li>
</ul>


                    </div>
    </div>
<p>If Stacksets included in <code style="line-height: 28.57143px;">sources.yml</code> are housed in non-public repositories, you will need to establish distribution keys (sometimes also called access keys) to enable git checkout from those repositories.  Because Nucleator accesses these repositories on your behalf, it needs to know which distribution key to use for which repository, and it needs to be able to find the distribution keys.  Nucleator leverages standard ssh configuration methods to use the right key for the right <code>git</code> repository.  Repositories that require private distribution keys are specified in the <code style="line-height: 28.57143px;">distkeys.yml</code> file in your <code style="line-height: 28.57143px;">.nucleator</code> directory.</p><p>Each such repository is represented in <code style="line-height: 28.57143px;">distkeys.yml</code> with an entry in the <code style="line-height: 28.57143px;">distribution_keys</code> dictionary as shown below.  The name of the private distribution key file to use when accessing this repository is maintained in <code>private_keyfile</code> for the repository.</p><p>Nucleator expects to find each of the private distribution keys that are specified in this way in a directory accessible via <code>~/.nucleator/distkeys/</code>.  For convenience, <code>nucleator init</code> creates a symbolic link at this path that refers to <code>~/.ssh/distkeys</code>.  You should therefore <code>mkdir ~/.ssh/distkeys</code> and place each private_keyfile specified in <code>distkeys.yml</code> in that directory.  You will need to obtain each such <code>private_keyfile</code> from the administrator of the private repository that you are accessing.<br /> </p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>distkeys.yml</b></div><div class="codeContent panelContent pdl">
<pre class="theme: RDark; brush: text; gutter: false" style="font-size:12px;">distribution_keys:
 
  # Private Enterprise Repository
  - hostname: projectname-private.repo.com # name of host to access
    ssh_config_host: private.repo.com # accessed via this name in ssh config
    private_keyfile: projectname.distkey.private.repo.com.id_rsa # private distribution key</pre>
</div></div><p> </p><p>You can avoid man-in-the-middle attacks by also specifying the hashed server identity for each host from which you are consuming Nucleator Stacksets under the <code style="line-height: 1.4285715;">known_hosts</code> dictionary, like this:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>distkeys.yml</b></div><div class="codeContent panelContent pdl">
<pre class="theme: RDark; brush: text; gutter: false" style="font-size:12px;">  &quot;github.com&quot;: &#39;|1|Lx5Iv3vYeHWPC8Jfm0GETrsa5Bg=|nOZBHiuMqeA9T24WylPcTsBZ3Tk= ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAq2A7hRGmdnm9tUDbO9IDSwBK6TbQa+PXYPCPy6rbTrTtw7PHkccKrpp0yVhp5HdEIcKr6pLlVDBfOLX9QUsyCOV0wzfjIJNlGEYsdlLJizHhbn2mUjvSAHQqZETYP81eFzLQNnPHt4EVVUh7VfDESU84KezmD5QlWpXLmvU31/yMf+Se8xhHTvKSCZIFImWwoG6mbUoWf9nzpIoaSjB+weqqUUmpaaasXVal72J+UX2B+2RPW3RcT0eOzQgqlJL3RKrTJvdsjE3JEAvGq3lGHSZXy28G3skua2SmVi/w4yCE6gbODqnTWlg7+wC604ydGXA8VJiS5ap43JXiUFFAaQ==&#39;</pre>
</div></div><h1 id="ChoosingNucleatorStacksets-UpdateStacksets"><span style="line-height: 1.4285715;">Update Stacksets</span> </h1>    <div class="aui-message success shadowed information-macro">
                    <p class="title">3. Install Specified Nucleator Stacksets</p>
                            <span class="aui-icon icon-success">Icon</span>
                <div class="message-content">
                            <p> Run:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: RDark; brush: bash; gutter: false" style="font-size:12px;">nucleator update</pre>
</div></div>
                    </div>
    </div>
<p>This updates the Nucleator installation with any new Stacksets as specified in <code>sources.yml</code>.  This command may be run multiple times during the lifetime of the project.</p><p>Stacksets are localized on the Nucleator instance in <code>~/.nucleator/contrib</code>.  To avoid inadvertent loss of local edits, Nucleator never deletes the contents of <code>contrib</code>.  Because the contents of <code>contrib</code> will be updated from source repositories, whenever <code>nucleator update</code> occurs, Nucleator moves the prior <code>contrib</code> directory and its contents into a uniquely named child of <code>~/.nucleator/contrib.bak</code></p><p> </p><hr /><p>When Stacksets are in place, continue to <a href="Sign-Up-for-New-AWS-Account-using-Nucleator-Naming-Conventions_20545589.html">Sign Up for New AWS Account using Nucleator Naming Conventions</a></p><p> </p>
      </article>
      <div class="clear-fix"></div>
      <div class="secondaryNav">
	<a href="../installation.html">Installation</a>
	<a href="index.html">Documentation</a>
	<a href="../releases.html">Releases</a>
	<a href="../license.html">License</a>
	<a href="../community.html">Community</a>
      </div>
      <footer>
	&copy; Copyright 2015, <a href="http://www.47lining.com" target="_blank">47Lining, LLC</a>
      </footer>
    </div>   </body>
</html>
